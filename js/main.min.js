jQuery(document).ready(function(a){function b(){var a=Backbone.history.fragment,b=a.split("/"),c=b[0].charAt(0).toUpperCase()+b[0].substr(1);c=c.replace(/-/g," "),p.text(c+" at "+o)}function c(){a("html, body").animate({scrollTop:0},123)}function d(b){a("html,body").animate({scrollTop:b})}function e(){a(".info-nav a").each(function(){a(this).removeClass("active")}),a(".info-nav").find('a[href="/menu/yummycakes"]').addClass("active")}function f(b){b===!1?a(".flexslider").flexslider({controlNav:!0,useCSS:!0,prevText:"",nextText:"",pauseOnAction:!0,pauseOnHover:!0,touch:!0,keyboard:!0,slideshowSpeed:5678,animationSpeed:234,initDelay:234}):b===!0&&(a("#thumbnails").flexslider({controlNav:!1,useCSS:!0,keyboard:!1,animationLoop:!1,slideshow:!1,itemWidth:140,itemMargin:10,asNavFor:"#carousel"}),a("#carousel").flexslider({controlNav:!1,animationLoop:!1,slideshow:!1,useCSS:!0,keyboard:!1,touch:!0,animationSpeed:100,sync:"#thumbnails"}),a("#thumbnails li").removeAttr("style")),a("a.flex-next, a.flex-prev").attr("data-bypass","true"),a(document).keydown(function(b){return 37===b.keyCode?(a("#carousel").flexslider("prev"),!1):39===b.keyCode?(a("#carousel").flexslider("next"),!1):void 0})}function g(){Modernizr.touch&&a(".menu").dropit()}function h(){a("nav a").each(function(){a(this).removeClass("active")});var b=Backbone.history.fragment;a("#logo-and-nav").find('a[href="/'+b+'"]').addClass("active");var c=b.split("/");c.length>1&&a("#logo-and-nav").find('a[href="/'+b+'"]').parentsUntil("ul.menu").children("a").addClass("active")}function i(){function b(){q.hasClass("success")||a("#content").load(m+n+"templates/loading.php")}q.removeClass("success"),setTimeout(b,500)}function j(){var b=a("img.unveil");b.unveil(0,function(){a(this).load(function(){this.style.opacity=1})}),a(window).resize(_.debounce(function(){b.unveil()},500))}function k(){var b=null;return a.ajax({async:!1,type:"GET",url:GinAjax.ajaxurl,data:{action:"get_site_title",WhiskeyNonce:GinAjax.WhiskeyNonce},dataType:"text",success:function(a){b=a},error:function(){}}),b}function l(){var b=null;return a.ajax({async:!1,type:"GET",url:GinAjax.ajaxurl,data:{action:"get_tagline",WhiskeyNonce:GinAjax.WhiskeyNonce},dataType:"text",success:function(a){b=a},error:function(){}}),b}var m=(a("script[src]").next().attr("src").split("?")[0].split("/").slice(0,-4).join("/")+"/","/"),n="wp-content/themes/beer/",o=k(),l=l(),p=a("title"),q=a("body"),r=a("#site"),s=a("#content");q.removeClass("hidden");var t=Backbone.Router.extend({routes:{"":"homeAction","news/:page":"newsPostAction",news:"loopNewsAction","blog/categories/:page":"blogCategoryAction","blog/:page":"blogArticleAction","*page":"defaultAction"},initialize:function(){this.bind("route",this._pageView),this.route(/\d{4}(?:\/\d{2})*/,"blogArticleAction")},_pageView:function(){var a=Backbone.history.fragment;ga("send","pageview",{page:"/"+a})},defaultAction:function(a){a&&(this.loadPageData(a,"page"),b())},homeAction:function(){this.loadPageData("home","home"),p.text(o+" is "+l)},loadPageData:function(d,e){function k(a,b){q.addClass("success"),s.html(b),f(),g(),j(),subscribeForm(),h(),c()}var l=Backbone.history.fragment;b(),h();var n="cache-"+d;r.data(n)?k(d,r.data(n)):a.ajax({type:"GET",url:GinAjax.ajaxurl,data:{action:"get_"+e,fragment:l,WhiskeyNonce:GinAjax.WhiskeyNonce},beforeSend:function(){i()},dataType:"text",success:function(a){k(d,a),r.data(n,a),j()},error:function(){s.load(m+"templates/404.php")}})}});new t,Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.history.start({pushState:!0,root:m}),a("#site").on("click","a[href]:not([data-bypass])",function(b){var c={prop:a(this).prop("href"),attr:a(this).attr("href")},d=location.protocol+"//"+location.host,e=location.pathname;r.data("currentPath",e);var f=r.data("currentPath").split("/")[1];r.data("historyPath",f);var g=Backbone.history.fragment.split("/")[1];r.data("clickedPath",g),c.prop.slice(0,d.length)!==d||b.metaKey||(b.preventDefault(),Backbone.history.navigate(c.attr,!0))}),a(document).on("click","#site a.null",function(a){a.preventDefault()}),a(document).on("click","#site a.some-slug",function(a){a.preventDefault(),c()}),a(document).on("click","#site a.scroll",function(b){b.preventDefault();var c=a(this).attr("href").split("/"),e=a("section.menu-"+c[2]).offset().top;d(e),a(".info-nav a").each(function(){a(this).removeClass("active")}),a(".info-nav").find('a[href="/menu/'+c[2]+'"]').addClass("active")});var u=_.debounce(function(){var b=a(window).scrollTop();0==b&&e()},50);window.addEventListener("scroll",u,!1);var v=a("#beer-contact-form"),w=a("#beer-contact-form input");v.h5Validate({errorClass:"error"}),v.submit(function(b){b.preventDefault();var c=!0;if(w.each(function(){a(this).hasClass("error")&&(c=!1)}),c===!0){var d=a(this).serialize();sidebarForm(d)}})});
//# sourceMappingURL=../main.map