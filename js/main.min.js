jQuery(document).ready(function(a){function b(){var a=Backbone.history.fragment,b=a.split("/"),c=b[0].charAt(0).toUpperCase()+b[0].substr(1);c=c.replace(/-/g," "),o.text(c+" at "+m)}function c(){a("html, body").animate({scrollTop:0},123)}function d(b){a("html,body").animate({scrollTop:b})}function e(){a(".info-nav a").each(function(){a(this).removeClass("active")}),a(".info-nav").find('a[href="/menu/yummycakes"]').addClass("active")}function f(b){b===!1?a(".flexslider").flexslider({controlNav:!0,useCSS:!0,prevText:"",nextText:"",pauseOnAction:!0,pauseOnHover:!0,touch:!0,keyboard:!0,slideshowSpeed:5678,animationSpeed:234,initDelay:234}):b===!0&&(a("#thumbnails").flexslider({controlNav:!1,useCSS:!0,keyboard:!1,animationLoop:!1,slideshow:!1,itemWidth:140,itemMargin:10,asNavFor:"#carousel"}),a("#carousel").flexslider({controlNav:!1,animationLoop:!1,slideshow:!1,useCSS:!0,keyboard:!1,touch:!0,animationSpeed:100,sync:"#thumbnails"}),a("#thumbnails li").removeAttr("style")),a("a.flex-next, a.flex-prev").attr("data-bypass","true"),a(document).keydown(function(b){return 37===b.keyCode?(a("#carousel").flexslider("prev"),!1):39===b.keyCode?(a("#carousel").flexslider("next"),!1):void 0})}function g(){Modernizr.touch&&a(".menu").dropit()}function h(){a("nav a").each(function(){a(this).removeClass("active")});var b=Backbone.history.fragment;a("#logo-and-nav").find('a[href="/'+b+'"]').addClass("active");var c=b.split("/");c.length>1&&a("#logo-and-nav").find('a[href="/'+b+'"]').parentsUntil("ul.menu").children("a").addClass("active")}function i(){function b(){p.hasClass("success")||a("#content").load(k+l+"templates/loading.php")}p.removeClass("success"),setTimeout(b,500)}function j(){var b=a("img.unveil");b.unveil(0,function(){a(this).load(function(){this.style.opacity=1})}),a(window).resize(_.debounce(function(){b.unveil()},500))}var k=(a("script[src]").next().attr("src").split("?")[0].split("/").slice(0,-4).join("/")+"/","/"),l="wp-content/themes/beer/",m="Beer",n="",o=a("title"),p=a("body"),q=a("#site"),r=a("#content");p.removeClass("hidden");var s=Backbone.Router.extend({routes:{"":"homeAction","news/:page":"newsPostAction",news:"loopNewsAction","blog/categories/:page":"blogCategoryAction","blog/:page":"blogArticleAction","*page":"defaultAction"},initialize:function(){this.bind("route",this._pageView),this.route(/\d{4}(?:\/\d{2})*/,"blogArticleAction")},_pageView:function(){var a=Backbone.history.fragment;ga("send","pageview",{page:"/"+a})},defaultAction:function(a){a&&(this.loadPageData(a,"page"),b())},homeAction:function(){this.loadPageData("home","home"),o.text(m+" is "+n)},loadPageData:function(d,e){function l(a,b){p.addClass("success"),r.html(b),f(),g(),j(),subscribeForm(),h(),c()}var m=Backbone.history.fragment;b(),h();var n="cache-"+d;q.data(n)?l(d,q.data(n)):a.ajax({type:"GET",url:GinAjax.ajaxurl,data:{action:"get_"+e,fragment:m,WhiskeyNonce:GinAjax.WhiskeyNonce},beforeSend:function(){i()},dataType:"text",success:function(a){l(a),q.data(n,a),j()},error:function(){r.load(k+"templates/404.php")}})}});new s,Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.history.start({pushState:!0,root:k}),a("#site").on("click","a[href]:not([data-bypass])",function(b){var c={prop:a(this).prop("href"),attr:a(this).attr("href")},d=location.protocol+"//"+location.host,e=location.pathname;q.data("currentPath",e);var f=q.data("currentPath").split("/")[1];q.data("historyPath",f);var g=Backbone.history.fragment.split("/")[1];q.data("clickedPath",g),c.prop.slice(0,d.length)!==d||b.metaKey||(b.preventDefault(),Backbone.history.navigate(c.attr,!0))}),a(document).on("click","#site a.null",function(a){a.preventDefault()}),a(document).on("click","#site a.some-slug",function(a){a.preventDefault(),c()}),a(document).on("click","#site a.scroll",function(b){b.preventDefault();var c=a(this).attr("href").split("/"),e=a("section.menu-"+c[2]).offset().top;d(e),a(".info-nav a").each(function(){a(this).removeClass("active")}),a(".info-nav").find('a[href="/menu/'+c[2]+'"]').addClass("active")});var t=_.debounce(function(){var b=a(window).scrollTop();0==b&&e()},50);window.addEventListener("scroll",t,!1);var u=a("#beer-contact-form"),v=a("#beer-contact-form input");u.h5Validate({errorClass:"error"}),u.submit(function(b){b.preventDefault();var c=!0;if(v.each(function(){a(this).hasClass("error")&&(c=!1)}),c===!0){var d=a(this).serialize();sidebarForm(d)}})});